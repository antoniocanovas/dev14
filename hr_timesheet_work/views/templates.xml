<?xml version='1.0' encoding='UTF-8'?>

<odoo>
    <data>

        <template id="work_sheet_report_document_report">
            <t t-call="web.external_layout">
                <t t-set="o" t-value="o.with_context(lang=lang)"/>
                <div class="page">
                    <div class="text-center">
                        <h1><span t-field="o.name"/></h1>
                    </div>
                    <div>
                        <t name="project" t-if="o.type == 'project'">
                            <h2>Servicios:</h2>
                                 <table class="table table-sm o_main_table">
                                         <thead style="display: table-row-group">
                                            <tr>
                                                <th name="th_task">Tarea</th>
                                                <th name="th_employee">Empleado</th>
                                                <th name="th_Description">Descripción</th>
                                                <th name="th_quantity">Cantidad</th>
                                                <th name="th_type">Tipo</th>
                                                <th name="th_date">Fecha</th>
                                            </tr>
                                         </thead>
                                         <tbody class="sale_tbody">
                                            <t t-foreach="o.project_service_ids" t-as="pr">
                                              <tr>
                                                <td name="td_task"><span t-field="pr.task_id" /></td>
                                                <td name="td_user_id"><span t-field="pr.user_id.name" /></td>
                                                <td name="td_description"><span t-field="pr.name" /></td>
                                                <td name="td_units"><span t-field="pr.unit_amount" /></td>
                                                <td name="td_type"><span t-field="pr.type_id" /></td>
                                                <td name="td_date"><span t-field="pr.date" /></td>
                                              </tr>
                                            </t>
                                         </tbody>
                                 </table>
                            <br/>
                            <h2>Productos:</h2>
                            <table class="table table-sm o_main_table">
                                         <thead style="display: table-row-group">
                                            <tr>
                                                <th name="th_line">Linea de presupuesto Work Sheet</th>
                                                <th name="th_product">Producto</th>
                                                <th name="th_Description">Descripción</th>
                                                <th name="th_quantity">Cantidad</th>
                                                <th name="th_amount">Importe</th>
                                                <th name="th_measure">Unidad de medida</th>
                                                <th name="th_date">Fecha</th>
                                            </tr>
                                         </thead>
                                         <tbody class="sale_tbody">
                                            <t t-foreach="o.project_product_ids" t-as="pr">
                                              <tr>
                                                <td name="td_product"><span t-field="pr.product_id" /></td>
                                                <td name="td_description"><span t-field="pr.name" /></td>
                                                <td name="td_units"><span t-field="pr.unit_amount" /></td>
                                                <td name="td_amount"><span t-field="pr.amount" /></td>
                                                <td name="td_measure"><span t-field="pr.product_uom_id.name" /></td>
                                                <td name="td_date"><span t-field="pr.date" /></td>
                                              </tr>
                                            </t>
                                         </tbody>
                                 </table>
                            <br/>
                        </t>
                        <p>Firmado por: <span t-field="o.partner_id.name" /> el <span t-field="o.write_date" />
                        <br/>
                        <img t-if="o.signature" t-attf-src="data:image/*;base64,{{o.signature}}"/></p>
                    </div>
                </div>
            </t>
        </template>
        
        <template id="work_sheet_report_document">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="hr_timesheet_work.work_sheet_report_document_report" t-lang="lang"/>
                </t>
            </t>
        </template>

    </data>
</odoo>
