<?xml version='1.0' encoding='UTF-8'?>
<odoo>

    <record id="project_roadmap_default_form" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <form>
                <sheet string="Fases del proyecto">
                    <h1>
                        <field name="name" modifiers="{}"/>
                    </h1>
                    <h4>
                        <field name="lead_id" attrs="{'invisible':['|',('type','!=','lead'),('lead_id','=',False)]}"/>
                        <field name="sale_id" attrs="{'invisible':['|',('type','!=','sale'),('sale_id','=',False)]}"/>
                        <field name="purchase_id" attrs="{'invisible':['|',('type','!=','purchase'),('purchase_id','=',False)]}"/>
                        <field name="task_id" attrs="{'invisible':['|',('type','!=','task'),('task_id','=',False)]}"/>
                        <field name="picking_id" attrs="{'invisible':['|',('type','!=','picking'),('picking_id','=',False)]}"/>
                        <field name="invoice_id" attrs="{'invisible':['|',('type','!=','invoice'),('invoice_id','=',False)]}"/>
                    </h4>
                    <group>
                        <field name="sequence"/>
                        <field name="type"/>
                        <field name="lead_id" attrs="{'invisible':['|',('type','!=','lead'),('lead_id','!=',False)]}"/>
                        <field name="sale_id" attrs="{'invisible':['|',('type','!=','sale'),('sale_id','!=',False)]}"/>
                        <field name="purchase_id" attrs="{'invisible':['|',('type','!=','purchase'),('purchase_id','!=',False)]}"/>
                        <field name="task_id" attrs="{'invisible':['|',('type','!=','task'),('task_id','!=',False)]}"  domain="[('stage_id.is_closed','=',False)]"/>
                        <field name="picking_id" attrs="{'invisible':['|',('type','!=','picking'),('picking_id','!=',False)]}"/>
                        <field name="invoice_id" attrs="{'invisible':['|',('type','!=','invoice'),('invoice_id','!=',False)]}"/>
                        <field name="user_id"/>
                        <field name="date_limit"/>
                    </group>
                    <group>
                        <field name="state"/>
                        <field name="active" widget="boolean_toggle"/>
                        <field name="project_id" required="1"/>
                        <field name="manager_id"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread" options="{'post_refresh':'recipients'}"/>
                </div>
            </form>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" eval="False"/>
        <field name="key" eval="False"/>
        <field name="mode">primary</field>
        <field name="model">project.roadmap</field>
        <field name="name">Default project roadmap form view</field>
        <field name="priority">16</field>
        <field name="type">form</field>
    </record>

    <record id="project_roadmap_default_tree" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <tree name="project_roadmaps"
                  decoration-success="active==False"
                  decoration-danger="active==True and date_limit != False and date_limit &lt; context_today().strftime('%Y-%m-%d')"
                  default_order="active asc, sequence asc">
                <field name="is_favorite" widget="boolean_favorite" nolabel="1"/>
                <field name="display_name"/>
                <field name="sequence" invisible="1"/>
                <field name="type" invisible="1"/>
                <field name="user_id" widget="many2one_avatar_user"/>
                <field name="activity_ids" widget="list_activity" optional="show"/>
                <field name="date_limit"/>
                <field name="state"/>
                <field name="active" string="Active" widget="boolean_toggle"/>
                <field name="project_id" invisible="1"/>
                <field name="manager_id" optional="hide"/>
            </tree>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" eval="False"/>
        <field name="key" eval="False"/>
        <field name="mode">primary</field>
        <field name="model">project.roadmap</field>
        <field name="name">Default project roadmap tree view</field>
        <field name="priority">16</field>
        <field name="type">tree</field>
    </record>

    <record id="project_roadmap_default_calendar" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <calendar date_start="date_limit" string="Roadmaps" mode="month" color="user_id" event_limit="5" hide_time="true" quick_add="False" js_class="project_calendar">
                <field name="user_id" avatar_field="image_128" filters="1"/>
                <field name="project_id"/>
                <field name="manager_id"/>
                <field name="date_limit"/>
                <field name="type"/>
            </calendar>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" eval="False"/>
        <field name="key" eval="False"/>
        <field name="mode">primary</field>
        <field name="model">project.roadmap</field>
        <field name="name">Default project roadmap calendar view</field>
        <field name="priority">16</field>
        <field name="type">calendar</field>
    </record>

    <record id="project_roadmap_my_phases_tree" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <tree name="project_roadmap_my_phases"
                  decoration-success="active==False"
                  decoration-danger="active==True and date_limit and date_limit &lt; context_today().strftime('%Y-%m-%d')"
                  default_order="active asc, sequence asc">
                <field name="is_favorite" widget="boolean_favorite" nolabel="1"/>
                <field name="project_id" optional="show"/>
                <field name="manager_id" optional="hide"/>
                <field name="display_name"/>
                <field name="sequence" optional="hide"/>
                <field name="type" invisible="1"/>
                <field name="user_id" widget="many2one_avatar_user"/>
                <field name="activity_ids" widget="list_activity" optional="show"/>
                <field name="date_limit"/>
                <field name="state"/>
                <field name="active" string="Active" widget="boolean_toggle"/>
            </tree>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" eval="False"/>
        <field name="key" eval="False"/>
        <field name="mode">primary</field>
        <field name="model">project.roadmap</field>
        <field name="name">Default project roadmap tree view</field>
        <field name="priority">16</field>
        <field name="type">tree</field>
    </record>

    <record id="project_roadmap_group_by_project_tree" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <tree name="project_roadmaps"
                  multi_edit="1"
                  decoration-success="active==False"
                  decoration-danger="active==True and date_limit != False and date_limit &lt; context_today().strftime('%Y-%m-%d')"
                  default_order="active desc, sequence asc">
                <field name="is_favorite" widget="boolean_favorite" nolabel="1"/>
                <field name="display_name"/>
                <field name="project_id" optional="hide"/>
                <field name="manager_id" optional="hide"/>
                <field name="sequence" invisible="1"/>
                <field name="type" invisible="1"/>
                <field name="user_id" widget="many2one_avatar_user"/>
                <field name="activity_ids" widget="list_activity" optional="show"/>
                <field name="date_limit"/>
                <field name="state"/>
                <field name="active" string="Active" widget="boolean_toggle"/>
                <field name="id" widget="open_tab" nolabel="1"/>
            </tree>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" eval="False"/>
        <field name="key" eval="False"/>
        <field name="mode">primary</field>
        <field name="model">project.roadmap</field>
        <field name="name">Default project roadmap group_by project tree view</field>
        <field name="priority">16</field>
        <field name="type">tree</field>
    </record>


    <record id="project_roadmap_search_view" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <data>
                <field name="name" string="Name"/>
                <field name="project_id"/>
                <field name="partner_id"/>
                <field name="user_id" string="User"/>
                <field name="manager_id" string="Manager"/>
                <field name="type" string="Type"/>
                <filter string="My phases" name="my_phases" domain="[('user_id', '=', uid)]"/>
                <separator/>
                <filter string="Starred" name="starred" domain="[('is_favorite', '=', True)]"/>
                <separator/>
                <filter string="Archived too" name="active" domain="[('active', 'in', [True,False])]"/>
                <separator/>
                <filter string="Unread Messages" name="message_needaction" domain="[('message_needaction', '=', True)]"/>
                <separator/>
                <!--
                                <filter string="Archived" name="active" domain="[('active', '=', False)]"/>
                                <filter string="Active" name="archived" domain="[('active', '=', True)]"/>
                                <filter invisible="1" string="Late Activities" name="activities_overdue" domain="[('my_activity_date_deadline', '&lt;', context_today().strftime('%Y-%m-%d'))]" help="Show all records which has next action date is before today"/>
                                <filter invisible="1" string="Today Activities" name="activities_today" domain="[('my_activity_date_deadline', '=', context_today().strftime('%Y-%m-%d'))]"/>
                                <filter invisible="1" string="Future Activities" name="activities_upcoming_all" domain="[('my_activity_date_deadline', '&gt;', context_today().strftime('%Y-%m-%d'))]"/>
                -->

                <group expand="0" string="Group By">
                    <filter string="Project" name="group_by_project" context="{'group_by': 'project_id'}"/>
                    <filter string="User" name="group_by_user" context="{'group_by': 'user_id'}"/>
                    <filter string="Manager" name="group_by_manager" context="{'group_by': 'manager_id'}"/>
                    <filter string="Type" name="group_by_type" context="{'group_by': 'type'}"/>
                    <filter string="Date limit" name="group_by_date_limit" context="{'group_by': 'date_limit'}"/>
                </group>
            </data>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" eval="False"/>
        <field name="key" eval="False"/>
        <field name="mode">primary</field>
        <field name="model">project.roadmap</field>
        <field name="name">Roadmap Search View</field>
        <field name="priority">99</field>
        <field name="type">search</field>
    </record>

    <record id="action_view_project_2_roadmap" model="ir.actions.act_window">
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">action</field>
        <field name="context">{'search_default_project_id': active_id,'default_project_id': active_id}</field>
        <field name="domain">[('project_id', '=', active_id)]</field>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="help"></field>
        <field name="limit">80</field>
        <field name="name">Roadmap</field>
        <field name="res_model">project.roadmap</field>
        <field name="target">current</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_id" ref="project_roadmap_default_tree"/>
        <field name="usage" eval="False"/>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="action_view_project_roadmap" model="ir.actions.act_window">
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">action</field>
        <field name="context">{'search_default_my_phases':1}</field>
        <field name="domain">[]</field>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="help"></field>
        <field name="limit">80</field>
        <field name="name">Roadmap</field>
        <field name="res_model">project.roadmap</field>
        <field name="target">current</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_id" ref="project_roadmap_group_by_project_tree"/>
        <field name="usage" eval="False"/>
        <field name="view_mode">tree,kanban,calendar,graph,pivot,form,activity</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('project_roadmap_group_by_project_tree')}),]"/>
    </record>

    <record id="roadmap_kanban_project_act_window" model="ir.actions.act_window">
        <field name="binding_model_id" eval="False"/>
        <field name="binding_type">action</field>
        <field name="context">{'search_default_roadmap':1}</field>
        <field name="domain">[]</field>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="help"></field>
        <field name="limit">80</field>
        <field name="name">Roadmap projects</field>
        <field name="res_model">project.project</field>
        <field name="target">current</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_id" ref="project.view_project_kanban"/>
        <field name="usage" eval="False"/>
        <field name="view_mode">kanban,tree,form</field>
    </record>


</odoo>