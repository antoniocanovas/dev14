<?xml version='1.0' encoding='UTF-8'?>
<odoo>

    <record id="project_crm_product_task_form_inh" model="ir.ui.view">
        <field name="name">Project CRM Product Task Form Inherited</field>
        <field name="model">project.task</field>
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <data>
                <field name="partner_id" position="after">
                    <field name="partner_tag_ids" widget="many2many_tags"  options="{'color_field': 'color'}"/>

                    <field name="product_id"/>
                </field>
            </data>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="priority">99</field>
        <field name="type">form</field>
    </record>

    # Vista de las tareas del CRM, desde men√∫ propio:
    <record id="crm_stock_tasks_tree_view" model="ir.ui.view">
        <field name="name">crm.stock.task.view</field>
        <field name="model">project.task</field>
        <field name="type">tree</field>
        <field name="inherit_id" eval="False"/>
        <field name="priority">99</field>
        <field name="arch" type="xml">
            <tree string="Tasks" multi_edit="1" sample="1">
                <field name="message_needaction" invisible="1" readonly="1"/>
                <field name="is_closed" invisible="1"/>
                <field name="sequence" invisible="1" readonly="1"/>
                <field name="name"/>
                <field name="lead_id" optional="show" required="1"/>
                <field name="project_id" optional="hide" readonly="1"/>
                <field name="brand_id"/>
                <field name="product_id"/>
                <field name="partner_id" optional="show"/>
                <field name="partner_tag_ids" widget="many2many_tags"  options="{'color_field': 'color'}"/>
                <field name="partner_city" optional="show"/>
                <field name="parent_id" groups="project.group_subtask_project" optional="hide"/>
                <field name="user_id" optional="show" widget="many2one_avatar_user"/>
                <field name="company_id" groups="base.group_multi_company" optional="hide"/>
                <field name="activity_ids" widget="list_activity" optional="show"/>
                <field name="date_deadline" optional="hide" widget="remaining_days" attrs="{'invisible': [('is_closed', '=', True)]}"/>
                <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color'}" optional="show"/>
                <field name="kanban_state" widget="state_selection" optional="hide" readonly="1"/>
                <field name="crm_stage_type" optional="hide"
                       options='{"bg_color": "cyan:crm_stage_integer==1; orange:crm_stage_integer==2; yellow:crm_stage_integer==3"}'/>
                <field name="crm_stage_integer" invisible="1"/>
                <field name="stage_id" invisible="context.get('set_visible',False)" optional="show" readonly="1"
                       options='{"bg_color": "cyan:crm_stage_integer==1; orange:crm_stage_integer==2; yellow:crm_stage_integer==3"}'/>
            </tree>
        </field>
    </record>
    <record id="crm_stock_tasks_search_inh_view" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <data>
                <field name="stage_id" position="after">
                    <field name="brand_id"/>
                    <field name="crm_stage_type"/>
                    <field name="partner_city"/>
                    <field name="product_id"/>
                </field>
                <filter name="stage" position="after">
                    <filter string="Marca" name="brand" context="{'group_by': 'brand_id'}"/>
                    <filter string="Estado comercial" name="crm_stage" context="{'group_by': 'crm_stage_type'}"/>
                    <filter string="Producto" name="product" context="{'group_by': 'product_id'}"/>
                </filter>
            </data>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" ref="project.view_task_search_form"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="model">project.task</field>
        <field name="name">Project task crm scrap Search Inherit</field>
        <field name="priority">99</field>
        <field name="type">search</field>
    </record>

</odoo>
