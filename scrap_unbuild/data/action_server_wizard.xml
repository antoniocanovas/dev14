<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>

        <record id="scrap_set_unbuild" model="ir.actions.server">
            <field name="name">=> Scrap Wizard Set Unbuild</field>
            <field name="model_id" ref="model_scrap_unbuild_wizard"/>
            <field name="state">code</field>
            <field name="code">
# Crea la CLASIFICACIÓN y desglose de productos en la ubicación del producto padre:
record.get_scrap_unbuild_action()
record.inventory_id.action_start()
if (record.inventory_id.autovalidate == True):
  record.inventory_id.action_validate()

            </field>
        </record>

    </data>

    <record id="update_unbuild_parent_product_value_aa" model="base.automation">
            <field name="name">=> Update unbuild parent product value</field>
            <field name="model_id" ref="model_stock_inventory"/>
            <field name="state">code</field>
            <field name="code">
record.update_unbuild_parent_product_value()
            </field>
            <field name="trigger">on_write</field>
            <field name="trigger_field_ids" eval="[(6,0, [ref('stock.field_stock_inventory__state')])]"/>
            <field name="filter_pre_domain"></field>
            <field name="filter_domain"></field>
            <field name="active" eval="True"/>
    </record>



    <record id="change_unbuild_set_parts_wizard" model="base.automation">
            <field name="name">=> Change SET unbuild parts on scrap wizard</field>
            <field name="model_id" ref="model_scrap_unbuild_wizard"/>
            <field name="state">code</field>
            <field name="code">
# CODE:
record.line_ids.unlink()
for part in record.unbuild_set_id.line_ids:
  newline = env['unbuild.product.line.wizard'].create({'part_id':part.part_id.id, 'qty':part.qty, 'name':part.part_id.name, 'product_tmpl_id':record.product_tmpl_id.id})
  record['line_ids'] = [(4,newline.id)]
            </field>
            <field name="trigger">on_change</field>
            <field name="on_change_field_ids" eval="[(6,0, [ref('scrap_unbuild.field_scrap_unbuild_wizard__unbuild_set_id')])]"/>
            <field name="filter_pre_domain"></field>
            <field name="filter_domain"></field>
            <field name="active" eval="True"/>
    </record>

</odoo>
