<odoo>

        <record id="add_pos_categ_id_2_pos_category_ids" model="base.automation">
            <field name="name">=> Add pos_categ_id 2 pos_category_ids</field>
            <field name="model_id" ref="model_product_template"/>
            <field name="state">code</field>
            <field name="code">
if record.pos_categ_id.id not in record.pos_category_ids.ids:
  record['pos_category_ids'] = [(4,record.pos_categ_id.id)]
            </field>
            <field name="trigger">on_change</field>
            <field name="on_change_field_ids" eval="[(6,0, [ref('point_of_sale.field_product_template__pos_categ_id')])]"/>
            <field name="filter_pre_domain"></field>
            <field name="filter_domain"></field>
            <field name="active" eval="True"/>
    </record>
</odoo>
